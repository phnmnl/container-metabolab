<tool id="metabolab" name="Metabolab">
     <description>Processing vendor raw data for Multivariate analysis</description>
     <requirements>
       <container type="docker">docker-registry.phenomenal-h2020.eu/phnmnl/metabolab</container>
     </requirements>
     <command><![CDATA[     
       echo $zipfile;
       ls -al $zipfile;
       cd /mydata;
       unzip $zipfile;
       cp $script container_script.ml
       ls -al;
       runMetabolab.sh
       echo "third hello"
       ]]>
     </command>
     <inputs>
         <param name="zipfile" type="data" format="zip" optional="False" label="Raw vendor data in a zipfile"/>
         <param name="script" type="data" format="txt" label="metabolab processing script,.ml file"/>
     </inputs>
     <outputs>
         <data name="Batmanfile" format="tabular" from_work_dir="myoutput_batman.csv" label="peak intensities for Batman"/>
     </outputs>
     <help><![CDATA[
     Demo data set download link: https://github.com/jianlianggao/batman/blob/develop/test_data/test_data_new.zip?raw=true
     
Four mandatory files: NMRdata.txt, batmanOptions.txt, multi_data_user.csv, metabolitesList.csv
NMRdata.txt is the NMR spectra data for BATMAN to process peak fitting. The NMRdata.txt is a tabulated file with the first column of data as p.p.m and the rest of columns as NMR spectra.

batmanOptions.txt is used for controlling BATMAN performance including the number range of spectra to be processed (the max number must NOT be greater than the number of spectra provided in the NMRdata.txt), the number of parallel processes, the number of prior iterations and posterior ones, the global peak width and variation (in log10) etc. The detail can be found in the BATMAN document. Please modify the file accordingly on your local computer before uploading to Galaxy.

multi_data_user.csv provides the characteristics of targeted metabolites NMR resonances. Please modify the file accordingly on your local computer before uploading to Galaxy.

metabolitesList.csv includes the list of targeted metabolites. Please modify the file accordingly on your local computer before uploading to Galaxy.

       ]]>
     </help>
 </tool>
